(()=>{var __webpack_modules__={931:()=>{eval("{//define field width\r\nlet field_width;\r\nif (document.body.clientWidth < 360) {\r\n    field_width = 200\r\n} else if (document.body.clientWidth < 560) {\r\n    field_width = 360\r\n} else {field_width = 500};\r\n\r\n\r\n// define vars\r\nlet field_size = 4;\r\nconst shuffle_factor = 10;\r\nconst block_margin = 5;\r\nlet tag_field;\r\nlet popup;\r\nlet image;\r\nlet image_ratio = 0;\r\nconst font_size = 90;\r\nlet history = [];\r\nlet block_empty = {};\r\nlet is_start = false;\r\nlet background_img = 1;\r\nlet background_img_url = 'assets/img/default_4.jpg';\r\nlet solve = false;\r\nlet steps = 0;\r\nlet timer = false;\r\nconst time = {\r\n    sec: 0,\r\n    min: 0\r\n};\r\nlet _load = false;\r\nlet dragSrc = null;\r\nlet dragTarget = null;\r\nlet sound = false;\r\n\r\n//add basic elements to DOM \r\nsetBasicHTML();\r\n\r\n// define  tags\r\nconst game_field = document.querySelector('.game_field');\r\nconst rss_sticker = document.querySelector('.rss_sticker');\r\nconst menu__bottom = document.querySelector('.menu__bottom');\r\nconst menu__top = document.querySelector('.menu__top');\r\n\r\n\r\n//add listeners\r\nstart_game.addEventListener('click', newGame);\r\nreset_game.addEventListener('click', resetGame);\r\nsolve_game.addEventListener('click', solveGame);\r\n\r\nsize_game.addEventListener('click', setFieldSizeOnButton);\r\n\r\nclassic_game.addEventListener('click', setDefaultBackground);\r\nimage_game.addEventListener('click', setImageBackground);\r\n\r\nsave_game.addEventListener('click', saveGame);\r\nload_game.addEventListener('click', loadGame);\r\nscore_game.addEventListener('click', loadScore);\r\n\r\nsound_game.addEventListener('click', switchSound);\r\n\r\n\r\n\r\n//define classes\r\nclass Block {\r\n    constructor(num, name, id, x, y) {\r\n        this.num = num;\r\n        this.name = name;\r\n\r\n        this.id = id;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    getX() {\r\n        return this.x * (field_width / field_size) + block_margin / 2;\r\n    }\r\n\r\n    getY() {\r\n        return this.y * (field_width / field_size) + block_margin / 2\r\n    }\r\n\r\n    getBlockSize() {\r\n        return (field_width / field_size) - block_margin\r\n    }\r\n}\r\n\r\n//functions\r\n\r\n\r\n//functions game service\r\nfunction saveGame() {\r\n\r\n    let save_game_HTML = createSaveGameHTML();\r\n\r\n    popup.classList.remove('hidden');\r\n\r\n    popup.innerHTML = save_game_HTML;\r\n\r\n    save_from_popup.addEventListener('click', saveFromPopup);\r\n    cancel_from_popup.addEventListener('click', cancelFromPopup);\r\n    buttonsDisabled(start_game, reset_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game, sound_game);\r\n\r\n}\r\n\r\nfunction loadGame() {\r\n\r\n    let load_game_HTML = createLoadGameHTML();\r\n\r\n    popup.classList.remove('hidden');\r\n    popup.innerHTML = load_game_HTML;\r\n\r\n    load_from_popup.addEventListener('click', loadFromPopup);\r\n    cancel_from_popup.addEventListener('click', cancelFromPopup);\r\n\r\n    buttonsDisabled(start_game, reset_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game, sound_game);\r\n\r\n}\r\n\r\nfunction loadScore() {\r\n\r\n    let load_game_HTML = createScoreGameHTML();\r\n\r\n    popup.classList.remove('hidden');\r\n    popup.innerHTML = load_game_HTML;\r\n\r\n    cancel_from_popup.addEventListener('click', cancelFromPopup);\r\n\r\n    buttonsDisabled(start_game, reset_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game, sound_game);\r\n\r\n}\r\n\r\nfunction loadFromPopup() {\r\n\r\n    buttonEnabled(start_game, reset_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game, sound_game);\r\n\r\n    let _history = localStorage.getItem('game_save');\r\n\r\n    if (_history == null) {\r\n        createMessage('No saved game!');\r\n        return;\r\n\r\n    }\r\n    steps = Number(localStorage.getItem('steps'));\r\n    time.sec = Number(localStorage.getItem('time_sec'));\r\n    time.min = Number(localStorage.getItem('time_min'));\r\n    field_size = Number(localStorage.getItem('_field_size'));\r\n    background_img_url = localStorage.getItem('_background_img_url');\r\n\r\n    _history = _history.split(\",\");\r\n\r\n    image.src = background_img_url;\r\n\r\n    removeFieldFromDom();\r\n\r\n    image.addEventListener('load', () => {\r\n\r\n        history = [];\r\n        for (let index = 0; index < _history.length; index += 3) {\r\n\r\n            history.push([_history[index], Number(_history[index + 1]), Number(_history[index + 2])]);\r\n        }\r\n\r\n        _load = true;\r\n        newGame();\r\n    })\r\n\r\n}\r\n\r\n\r\nfunction cancelFromPopup() {\r\n\r\n    popup.innerHTML = '';\r\n\r\n    popup.classList.add('hidden');\r\n    buttonEnabled(start_game, reset_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game, sound_game);\r\n}\r\n\r\n\r\nfunction saveScoreFromPopup() {\r\n\r\n    let name;\r\n    let score_name = document.querySelector('input[name=\"score_name\"]');\r\n    _score = localStorage.getItem('game_score') || '';\r\n    let score = _score.split(\",\");\r\n    name = score_name.value.slice(0, 10);\r\n\r\n    let current_entry = [(time.min * 60) + (time.sec - 1), steps, field_size, name];\r\n    score.push(current_entry);\r\n    localStorage.setItem('game_score', score);\r\n\r\n    cancelFromPopup();\r\n\r\n}\r\n\r\n\r\n// Show Time\r\nfunction showTime() {\r\n\r\n    clearInterval(timer);\r\n\r\n    time_game.textContent = `${addZero(time.min)}:${addZero(time.sec)}`;\r\n    timer = setInterval(() => {\r\n\r\n        time_game.textContent = `${addZero(time.min)}:${addZero(time.sec)}`;\r\n\r\n        if (time.sec == 59) {\r\n            time.sec = 0;\r\n            time.min = (time.min + 1) % 60;\r\n\r\n        }\r\n        time.sec = time.sec + 1;\r\n\r\n    }, 1000);\r\n\r\n}\r\n\r\nfunction showSteps() {\r\n\r\n    steps_game.textContent = `${steps} moves`;\r\n    steps++;\r\n}\r\n\r\n// Add Zeros\r\nfunction addZero(n) {\r\n    return (parseInt(n, 10) < 10 ? '0' : '') + n;\r\n}\r\n\r\n//sticker\r\nfunction setSticker() {\r\n    let sticker = Math.floor(Math.random() * 11) + 1;\r\n    rss_sticker.style.background = `url(\"./assets/img/rsschool/sticker_${sticker}.png\") center no-repeat`;\r\n    rss_sticker.style.backgroundSize = 'contain';\r\n}\r\n\r\n\r\nfunction moveSticker() {\r\n    rss_sticker.classList.add('rss_sticker--move');\r\n}\r\n\r\n\r\nfunction backSticker() {\r\n    rss_sticker.classList.remove('rss_sticker--move');\r\n}\r\n\r\n\r\n//functions serve buttons\r\n\r\nfunction setFieldSizeOnButton(params) {\r\n\r\n    resetGameInfo();\r\n    backSticker()\r\n\r\n    field_size = field_size >= 8 ? 3 : field_size += 1;\r\n    history = [];\r\n\r\n    removeFieldFromDom();\r\n\r\n    init();\r\n}\r\n\r\n\r\nfunction buttonsDisabled(...args) {\r\n\r\n    for (let id of args) {\r\n        id.disabled = true;\r\n        id.style.opacity = '0.3';\r\n    }\r\n}\r\n\r\nfunction buttonEnabled(...args) { //id list\r\n\r\n    for (let id of args) {\r\n        id.disabled = false;\r\n        id.style.opacity = '1';\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction setDefaultBackground() {\r\n\r\n    resetGameInfo();\r\n    backSticker();\r\n    removeFieldFromDom();\r\n    background_img_url = 'assets/img/default_4.jpg';\r\n    init();\r\n}\r\n\r\n\r\nfunction setImageBackground() {\r\n\r\n    resetGameInfo();\r\n    backSticker();\r\n\r\n    is_start = false;\r\n\r\n    removeFieldFromDom();\r\n    background_img = (background_img + 1) % 10;\r\n    background_img_url = 'assets/img/' + background_img + '.jpg';\r\n\r\n    init();\r\n}\r\n\r\n\r\n// functions  make blocks\r\n\r\nfunction setBlocks(field_size) {\r\n\r\n    let count = 0;\r\n    let _block = [];\r\n    let _start = [];\r\n    history = [];\r\n\r\n    for (let y = 0; y < field_size; y++) {\r\n        for (let x = 0; x < field_size; x++) {\r\n            window['block_' + String(count + 1)] = new Block(count + 1, 'block_' + String(count + 1), 'id_' + String(count + 1), x, y);\r\n\r\n            _block = ['block_' + String(count + 1), x, y];\r\n            history.push(_block);\r\n            count += 1;\r\n        }\r\n    }\r\n\r\n    block_empty = window['block_' + (field_size * field_size)];\r\n\r\n}\r\n\r\n\r\nfunction drawBlocks() {\r\n\r\n    for (let index = 0; index < history.length; index++) {\r\n\r\n        let block = window[history[index][0]];\r\n\r\n        block.x = history[index][1];\r\n        block.y = history[index][2];\r\n\r\n        block.id.style.left = block.getX(block.x) + 'px';\r\n        block.id.style.top = block.getY(block.y) + 'px';\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction generateBlock(block) {\r\n\r\n    block.id = document.createElement('canvas');\r\n    block.id.setAttribute('id', \"id_\" + block.num);\r\n    block.id.setAttribute('data-num', \"block_\" + block.num);\r\n\r\n    block.id.setAttribute('draggable', \"true\");\r\n    //click\r\n    block.id.addEventListener('click', moveBlock, false);\r\n\r\n    //drag-and-drop\r\n    block.id.addEventListener('dragstart', handleDragStart, false);\r\n    block.id.addEventListener('dragenter', handleDragEnter, false);\r\n    block.id.addEventListener('dragover', handleDragOver, false);\r\n    block.id.addEventListener('dragleave', handleDragLeave, false);\r\n    block.id.addEventListener('drop', handleDrop, false);\r\n    block.id.addEventListener('dragend', handleDragEnd, false);\r\n\r\n    block.id.classList.add('block');\r\n    block.id.style.width = block.getBlockSize() + 'px';\r\n    block.id.style.height = block.getBlockSize() + 'px';\r\n    block.id.style.left = block.getX() + 'px';\r\n    block.id.style.top = block.getY() + 'px';\r\n    tag_field.appendChild(block.id);\r\n\r\n    context = block.id.getContext('2d');\r\n\r\n    if (block.num !== field_size * field_size) {\r\n\r\n        context.drawImage(image,\r\n            block.getX() * image_ratio,\r\n            block.getY() * image_ratio,\r\n            (field_width / field_size) * image_ratio,\r\n            (field_width / field_size) * image_ratio,\r\n            0, 0, block.id.width, block.id.height);\r\n        if (background_img_url == 'assets/img/default_4.jpg') {\r\n            context.font = font_size + 'px Arial Black';\r\n            context.textAlign = \"center\";\r\n            context.textBaseline = 'middle';\r\n            context.fillStyle = \"#fff5f5\";\r\n            context.shadowBlur = 10;\r\n            context.shadowColor = \"black\";\r\n            context.fillText(block.num, block.id.width / 2, block.id.height / 2);\r\n        }\r\n\r\n    } else {\r\n        //invisible block\r\n        block.id.style.boxShadow = 'none';\r\n        block.id.style.border = 'none';\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction moveBlock(e) {\r\n\r\n    let block_current;\r\n\r\n    if (e === undefined) {\r\n\r\n        if (dragTarget.dataset.num !== 'block_' + String(field_size * field_size)) {\r\n            return;\r\n        }\r\n\r\n        block_current = window[dragSrc.dataset.num];\r\n        block_current.id.style.transition = '0s';\r\n\r\n    } else {\r\n\r\n        block_current = window[e.target.dataset.num];\r\n        block_current.id.style.transition = '0.3s';\r\n\r\n    }\r\n\r\n    //change only next\r\n    if ((block_current.x == block_empty.x && block_current.y == block_empty.y + 1) || (block_current.x == block_empty.x && block_current.y == block_empty.y - 1) ||\r\n        (block_current.y == block_empty.y && block_current.x == block_empty.x + 1) || (block_current.y == block_empty.y && block_current.x == block_empty.x - 1)) {\r\n\r\n        //  steps++;\r\n        if (is_start) showSteps();\r\n\r\n        // change blocks\r\n        [block_current.x, block_empty.x] = [block_empty.x, block_current.x];\r\n        [block_current.y, block_empty.y] = [block_empty.y, block_current.y];\r\n\r\n        //sound\r\n        if (sound) sound_1.play();\r\n\r\n        block_current.id.style.top = block_current.getY() + 'px';\r\n        block_current.id.style.left = block_current.getX() + 'px';\r\n\r\n        block_empty.id.style.top = block_empty.getY() + 'px';\r\n        block_empty.id.style.left = block_empty.getX() + 'px';\r\n\r\n        //check for win\r\n        if (is_start) winGame();\r\n\r\n        //add to history\r\n        let last_index = history.length - 1;\r\n\r\n        if (block_empty.x == history[last_index - 1][1] && block_empty.y == history[last_index - 1][2]) {\r\n            history.pop();\r\n            history.pop();\r\n        } else {\r\n            history.push([block_current.name, block_current.x, block_current.y]);\r\n            history.push([block_empty.name, block_empty.x, block_empty.y]);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction removeFieldFromDom() {\r\n    let game_field = document.querySelector('.game_field');\r\n    let field = document.querySelector('.field');\r\n    game_field.removeChild(field);\r\n\r\n}\r\n\r\n\r\nfunction solveGame() {\r\n\r\n    if (!is_start) return;\r\n\r\n    is_start = false;\r\n    steps = 0;\r\n    if (timer) clearInterval(timer);\r\n\r\n    //showTime();\r\n    time_game.textContent = `--:--`;\r\n\r\n    backSticker();\r\n\r\n    let index = history.length - 1;\r\n\r\n    solve = setInterval(() => {\r\n\r\n        showSteps();\r\n\r\n        buttonsDisabled(start_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game);\r\n\r\n        if (index <= field_size * field_size) {\r\n\r\n            buttonEnabled(start_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game);\r\n            clearInterval(solve);\r\n        } else {\r\n            let _block_empty = window[history[index][0]];\r\n            let _block_current = window[history[index - 1][0]];\r\n            _block_current.id.style.transition = '0.3s';\r\n\r\n            [_block_current.x, _block_empty.x] = [_block_empty.x, _block_current.x];\r\n            [_block_current.y, _block_empty.y] = [_block_empty.y, _block_current.y];\r\n\r\n            _block_current.id.style.top = _block_current.getY() + 'px';\r\n            _block_current.id.style.left = _block_current.getX() + 'px';\r\n\r\n            _block_empty.id.style.top = _block_empty.getY() + 'px';\r\n            _block_empty.id.style.left = _block_empty.getX() + 'px';\r\n        }\r\n\r\n        index -= 2;\r\n\r\n    }, 500);\r\n\r\n    if (timer) clearInterval(timer);\r\n\r\n}\r\n\r\n\r\n// make game_field\r\n\r\nfunction makeGameField(params) {\r\n    makeField(field_width);\r\n    createPopup();\r\n}\r\n\r\n//make field\r\nfunction makeField(field_width) {\r\n\r\n    tag_field = document.querySelector('.field');\r\n    if (tag_field === null) {\r\n\r\n        tag_field = document.createElement('div');\r\n        tag_field.classList.add('field');\r\n        tag_field.style.width = field_width + 'px';\r\n        tag_field.style.height = field_width + 'px';\r\n\r\n        //  game_field.appendChild(tag_field);\r\n        menu__bottom.parentNode.insertBefore(tag_field, menu__bottom);\r\n        game_field.addEventListener('dragover', handleDragOver);\r\n        game_field.addEventListener('dragenter', handleDragEnter);\r\n\r\n    }\r\n\r\n}\r\n\r\n//drag-and-drop\r\n\r\nfunction handleDragStart(e) {\r\n    dragSrc = this;\r\n}\r\n\r\nfunction handleDragOver(e) {\r\n    if (e.preventDefault) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction handleDragEnter(e) {}\r\n\r\nfunction handleDragLeave(e) {}\r\n\r\n\r\nfunction handleDrop(e) {\r\n    dragTarget = this;\r\n\r\n    if (e.stopPropagation) {\r\n        e.stopPropagation();\r\n    }\r\n\r\n    moveBlock();\r\n\r\n    return false;\r\n}\r\n\r\nfunction handleDragEnd(e) {}\r\n\r\n\r\n// Intit\r\n\r\nfunction init() {\r\n\r\n    setSticker();\r\n\r\n    // get image\r\n    image = new Image;\r\n    image.src = background_img_url;\r\n    image.addEventListener('load', () => {\r\n\r\n        image_ratio = image.width / (field_width + 3);\r\n\r\n        start();\r\n    })\r\n\r\n}\r\n\r\n\r\nfunction switchSound() {\r\n    sound = !sound;\r\n    sound_game.classList.toggle('button--nightsky');\r\n}\r\n\r\n\r\nfunction setTransition() {\r\n\r\n    for (let index = 1; index <= field_size * field_size; index++) {\r\n\r\n        window['block_' + index].id.style.transition = '0.3s';\r\n    }\r\n}\r\n\r\nfunction getRandomNewCoords() {\r\n\r\n    const direction_table = [\r\n        ['x', 'y'],\r\n        [1, -1]\r\n    ];\r\n    let new_x;\r\n    let new_y;\r\n\r\n    if (direction_table[0][Math.round(Math.random())] === 'x') {\r\n\r\n        new_x = Math.abs(block_empty.x + direction_table[1][Math.round(Math.random())]);\r\n        new_y = block_empty.y;\r\n        new_x = new_x === field_size ? field_size - 2 : new_x;\r\n\r\n    } else {\r\n\r\n        new_y = Math.abs(block_empty.y + direction_table[1][Math.round(Math.random())]);\r\n        new_y = new_y === field_size ? field_size - 2 : new_y;\r\n        new_x = block_empty.x;\r\n    }\r\n\r\n    return {\r\n        new_x: new_x,\r\n        new_y: new_y,\r\n    };\r\n\r\n}\r\n\r\nfunction addBackMove() {\r\n\r\n    let direction_object = getRandomNewCoords();\r\n\r\n    let find = false;\r\n    let index = history.length - 1;\r\n\r\n    if (direction_object.new_x !== history[index - 2][1] && direction_object.new_y !== history[index - 2][2]) {\r\n        while (!find) {\r\n\r\n            if (direction_object.new_x == history[index][1] && direction_object.new_y == history[index][2]) {\r\n\r\n                let block_current = window[history[index][0]];\r\n\r\n                [block_current.x, block_empty.x] = [block_empty.x, block_current.x];\r\n                [block_current.y, block_empty.y] = [block_empty.y, block_current.y];\r\n\r\n                history.push([block_current.name, block_current.x, block_current.y]);\r\n                history.push([block_empty.name, block_empty.x, block_empty.y]);\r\n\r\n                find = true;\r\n            }\r\n            index--;\r\n        }\r\n    }\r\n}\r\n\r\nfunction shuffleBlocks(times) {\r\n    for (let index = 0; index < times; index++) {\r\n\r\n        addBackMove();\r\n    }\r\n\r\n}\r\n\r\nfunction drawStartPosition() {\r\n\r\n    setBlocks(field_size);\r\n\r\n    for (let index = 1; index <= field_size * field_size; index++) {\r\n\r\n        generateBlock(window['block_' + String(index)]);\r\n    }\r\n}\r\n\r\nfunction resetGameInfo() {\r\n    steps = 0;\r\n    steps_game.textContent = `${steps} moves`;\r\n    time.sec = 0,\r\n        time.min = 0,\r\n        time_game.textContent = `${addZero(0)}:${addZero(0)}`;\r\n    if (timer) clearInterval(timer);\r\n}\r\n\r\n\r\nfunction resetGame() {\r\n\r\n    backSticker();\r\n\r\n    if (solve) clearInterval(solve);\r\n\r\n    resetGameInfo();\r\n\r\n    buttonEnabled(start_game, size_game, solve_game, classic_game, image_game, save_game, load_game, score_game);\r\n    backSticker();\r\n\r\n    is_start = false\r\n\r\n    resetBlocks();\r\n    setTransition();\r\n\r\n    drawBlocks();\r\n}\r\n\r\nfunction resetBlocks() {\r\n\r\n    let count = 0;\r\n    let _block = [];\r\n    history = [];\r\n\r\n    for (let y = 0; y < field_size; y++) {\r\n        for (let x = 0; x < field_size; x++) {\r\n\r\n            _block = ['block_' + String(count + 1), x, y];\r\n            window['block_' + String(count + 1)].x = x;\r\n            window['block_' + String(count + 1)].y = y;\r\n\r\n            history.push(_block);\r\n            count += 1;\r\n        }\r\n    }\r\n    block_empty = window['block_' + String((field_size * field_size))];\r\n}\r\n\r\n\r\nfunction createPopup() {\r\n    popup = document.createElement('div');\r\n    popup.className = 'popup hidden';\r\n    popup.style.width = field_width + 'px';\r\n    popup.style.height = field_width + 'px';\r\n\r\n    tag_field.appendChild(popup);\r\n\r\n}\r\n\r\n\r\nfunction saveFromPopup() {\r\n\r\n    steps = steps > 0 ? steps - 1 : 0;\r\n    time.sec = time.sec > 0 ? time.sec - 1 : 0;\r\n\r\n    localStorage.setItem('game_save', history);\r\n    localStorage.setItem('steps', steps);\r\n    localStorage.setItem('time_sec', time.sec);\r\n    localStorage.setItem('time_min', time.min);\r\n    localStorage.setItem('_field_size', field_size);\r\n    localStorage.setItem('_background_img_url', background_img_url);\r\n\r\n    cancelFromPopup();\r\n\r\n}\r\n\r\n//winGame\r\nfunction winGame() {\r\n\r\n    for (let index = 0; index < field_size * field_size; index++) {\r\n        let block_current = window['block_' + String(index + 1)];\r\n        if (block_current.x !== history[index][1] || block_current.y !== history[index][2]) {\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    clearInterval(timer);\r\n    console.log('pos 1');\r\n\r\n\r\n    setTimeout(() => {\r\n        console.log('pos 2');\r\n        popup.classList.remove('hidden');\r\n\r\n        let win_game_HTML = createWinGameHTML();\r\n        popup.innerHTML = win_game_HTML;\r\n\r\n        save_score_from_popup.addEventListener('click', saveScoreFromPopup);\r\n        cancel_from_popup.addEventListener('click', cancelFromPopup);\r\n    }, 1000);\r\n\r\n\r\n}\r\n\r\n\r\n//functions with Get HTML\r\n\r\nfunction createSaveGameHTML() {\r\n    return `\r\n    <div>\r\n    <div style=\"font-size:2rem; font-weight: bold\">Save game</div>  \r\n     <div><button  id = \"save_from_popup\"  type=\" button\" class=\"button button--green\"><span>Save</span></button></div>\r\n     <div><button  id = \"cancel_from_popup\" type=\" button\" class=\"button button--red\"><span>Cancel</span></button><div> \r\n     </div>\r\n    `;\r\n}\r\n\r\nfunction createLoadGameHTML() {\r\n    return `\r\n    <div>\r\n    <div style=\"font-size:2rem; font-weight: bold\">Load game</div> \r\n     <div><button  id = \"load_from_popup\" type=\" button\" class=\"button button--green\"><span>Load</span></button></div>\r\n     <div><button  id = \"cancel_from_popup\" type=\" button\" class=\"button button--red\"><span>Cancel</span></button><div> \r\n     </div>\r\n    `;\r\n}\r\n\r\nfunction createScoreGameHTML() {\r\n    let rez;\r\n    rez = `\r\n     <div>\r\n     <div style=\"font-size:2rem; font-weight: bold\">Score</div>`;\r\n\r\n    let _score = localStorage.getItem('game_score') || '';\r\n\r\n    _score = _score.split(',');\r\n\r\n    let name;\r\n    let steps;\r\n    let time;\r\n    let time_min;\r\n    let time_sec;\r\n    let size;\r\n\r\n    for (let index = 0; index < 10; index++) {\r\n\r\n        name = _score.pop();\r\n        size = _score.pop();\r\n        size = `${size}x${size}`;\r\n\r\n        steps = _score.pop();\r\n        time = _score.pop();\r\n        time_min = time ? addZero(Math.trunc(time / 60)) : '00';\r\n        time_sec = time ? addZero(time % 60) : '00';\r\n\r\n        rez += steps ? `<div  class =\"popup__score\" style = \"background: #f4e9a1; margin:2px; padding: 1px 12px 1px 12px\"> \r\n        ${name} ${size} moves: ${steps} time: ${time_min}:${time_sec}</div>` :\r\n            `<div style = \"background: #f4e9a1; margin:2px; padding: 1px 10px 1px 10px; color:#f4e9a1;\">-</div>`;\r\n    }\r\n    rez += `<div><button  id = \"cancel_from_popup\" type=\" button\" class=\"button button--red\"><span>Cancel</span></button><div> \r\n    </div>\r\n   `;\r\n    return rez;\r\n}\r\n\r\n\r\nfunction createWinGameHTML() {\r\n    return `\r\n    <div>\r\n     <div style=\"font-size:2rem; font-weight: bold; color: green; text-align: center\">Hooray! You solved the puzzle in</div>\r\n    \r\n     <div style=\" font-size:1.5rem; text-align: center\"> ${steps-1} moves & time: ${time.min}:${time.sec-1} </div>\r\n     <div> <input type=\"text\" style=\"line-height:1rem; padding: 0.5rem; border:3px solid green\"   name=\"score_name\" autofocus> </div>\r\n       \r\n     <div>\r\n        <button id =\"save_score_from_popup\" type=\" button\" class=\"button button--green\"><span>Save yours result </span></button>\r\n        <button id =\"cancel_from_popup\" type=\" button\" class=\"button button--red\" style=\"margin-top:0.5rem\"><span>Cancel </span></button>\r\n     <div>\r\n    \r\n    </div>\r\n    `;\r\n}\r\n\r\n\r\nfunction createMessage(message) {\r\n    let message_HTML = `\r\n    <div>\r\n     <div style=\"font-size:2rem; font-weight: bold; text-align: center\">${message}</div>   \r\n     <div>\r\n        <button id =\"cancel_from_popup\" type=\" button\" class=\"button button--red\" style=\"margin-top:0.5rem\"><span>Cancel </span></button>\r\n     <div>   \r\n    </div>\r\n    `;\r\n\r\n    popup.classList.remove('hidden');\r\n\r\n    popup.innerHTML = message_HTML;\r\n\r\n    cancel_from_popup.addEventListener('click', cancelFromPopup);\r\n}\r\n\r\n\r\nfunction setBasicHTML() {\r\n\r\n    document.body.innerHTML = ` <div class=\"game_field\">\r\n    <div class=\"header\">\r\n        <div class=\"header__sticker\">\r\n            <div class=\"rss_sticker\"></div>\r\n        </div>\r\n        <div class=\"header__gamedata\">\r\n            <div id=\"time_game\" class=\"\"></div>\r\n            <div id=\"steps_game\" class=\"\"></div>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"menu__top\">\r\n        <div class=\"menu__top_inner\">\r\n            <button id=\"start_game\" type=\"button\" class=\"button button--green\"> <span>Start</span></button>\r\n            <button id=\"reset_game\" type=\"button\" class=\"button button--red\"> <span>Reset</span></button>\r\n            <button id=\"solve_game\" type=\"button\" class=\"button button--leaf\"><span>Solve</span></button>\r\n        </div>\r\n\r\n        <div class=\"menu__top_inner\">  <button id=\"size_game\" type=\"button\" class=\"button button--nightsky\"><span>4Ñ…4</span></button>\r\n        <button id=\"classic_game\" type=\"button\" class=\"button button--blue\"><span>Classic</span></button>\r\n            <button id=\"image_game\" type=\"button\" class=\"button button--water\"><span>Image</span></button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"menu__bottom\">\r\n        <div class=\"menu__top_inner\">\r\n            <button id=\"save_game\" type=\"button\" class=\"button button--nightsky\"> <span>Save</span></button>\r\n            <button id=\"load_game\" type=\"button\" class=\"button button--nightsky\"> <span>Load</span></button>\r\n            <button id=\"score_game\" type=\"button\" class=\"button button--nightsky\"><span>Score</span></button>\r\n        </div>\r\n        <div class=\"menu__top_inner\">\r\n            <button id=\"sound_game\" type=\"button\" class=\"button \"><span>Sound</span></button>\r\n        </div>\r\n       \r\n    </div>\r\n</div>\r\n\r\n<audio id=\"sound_1\" src=\"./assets/sounds/sound_1.mp3\"></audio>\r\n    `;\r\n}\r\n\r\n\r\nfunction start() {\r\n\r\n    makeGameField();\r\n    //set size\r\n    size_game.children[0].textContent = field_size + 'x' + field_size;\r\n\r\n    drawStartPosition();\r\n\r\n}\r\n\r\n\r\nfunction newGame() {\r\n\r\n    if (!_load) {\r\n\r\n        time.sec = 0;\r\n        time.min = 0\r\n    };\r\n\r\n    showTime();\r\n\r\n    is_start = true;\r\n    if (!_load) steps = 0;\r\n\r\n    moveSticker();\r\n\r\n    if (!_load) {\r\n        resetBlocks()\r\n    };\r\n\r\n    setTransition();\r\n\r\n    showSteps();\r\n\r\n    if (!_load) {\r\n        shuffleBlocks(shuffle_factor * field_size);\r\n    }\r\n\r\n    _load = false;\r\n\r\n    drawBlocks();\r\n\r\n}\r\n\r\n\r\n\r\n//start\r\ninit();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTMxLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRSxNQUFNO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5QkFBeUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isa0JBQWtCLEdBQUcsa0JBQWtCO0FBQ3RFO0FBQ0E7QUFDQSxtQ0FBbUMsa0JBQWtCLEdBQUcsa0JBQWtCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsUUFBUTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQyx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQ0FBa0M7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0NBQWtDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU87QUFDdkM7QUFDQTtBQUNBLG1DQUFtQyxXQUFXLEdBQUcsV0FBVztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQyx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlDQUFpQztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSyxHQUFHLEtBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLFlBQVk7QUFDOUYsVUFBVSxNQUFNLEVBQUUsTUFBTSxTQUFTLE9BQU8sUUFBUSxTQUFTLEdBQUcsU0FBUztBQUNyRSxnREFBZ0QsWUFBWSw0QkFBNEIsY0FBYztBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG1CQUFtQixjQUFjO0FBQ2xFO0FBQ0Esb0NBQW9DLHVCQUF1QixTQUFTLGdCQUFnQixTQUFTLEdBQUcsWUFBWTtBQUM1Ryx1REFBdUQsaUJBQWlCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsbUJBQW1CLHNCQUFzQixRQUFRO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZy0xNS8uL3NyYy9pbmRleC5qcz80YzA3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vZGVmaW5lIGZpZWxkIHdpZHRoXHJcbmxldCBmaWVsZF93aWR0aDtcclxuaWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPCAzNjApIHtcclxuICAgIGZpZWxkX3dpZHRoID0gMjAwXHJcbn0gZWxzZSBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA8IDU2MCkge1xyXG4gICAgZmllbGRfd2lkdGggPSAzNjBcclxufSBlbHNlIHtmaWVsZF93aWR0aCA9IDUwMH07XHJcblxyXG5cclxuLy8gZGVmaW5lIHZhcnNcclxubGV0IGZpZWxkX3NpemUgPSA0O1xyXG5jb25zdCBzaHVmZmxlX2ZhY3RvciA9IDEwO1xyXG5jb25zdCBibG9ja19tYXJnaW4gPSA1O1xyXG5sZXQgdGFnX2ZpZWxkO1xyXG5sZXQgcG9wdXA7XHJcbmxldCBpbWFnZTtcclxubGV0IGltYWdlX3JhdGlvID0gMDtcclxuY29uc3QgZm9udF9zaXplID0gOTA7XHJcbmxldCBoaXN0b3J5ID0gW107XHJcbmxldCBibG9ja19lbXB0eSA9IHt9O1xyXG5sZXQgaXNfc3RhcnQgPSBmYWxzZTtcclxubGV0IGJhY2tncm91bmRfaW1nID0gMTtcclxubGV0IGJhY2tncm91bmRfaW1nX3VybCA9ICdhc3NldHMvaW1nL2RlZmF1bHRfNC5qcGcnO1xyXG5sZXQgc29sdmUgPSBmYWxzZTtcclxubGV0IHN0ZXBzID0gMDtcclxubGV0IHRpbWVyID0gZmFsc2U7XHJcbmNvbnN0IHRpbWUgPSB7XHJcbiAgICBzZWM6IDAsXHJcbiAgICBtaW46IDBcclxufTtcclxubGV0IF9sb2FkID0gZmFsc2U7XHJcbmxldCBkcmFnU3JjID0gbnVsbDtcclxubGV0IGRyYWdUYXJnZXQgPSBudWxsO1xyXG5sZXQgc291bmQgPSBmYWxzZTtcclxuXHJcbi8vYWRkIGJhc2ljIGVsZW1lbnRzIHRvIERPTSBcclxuc2V0QmFzaWNIVE1MKCk7XHJcblxyXG4vLyBkZWZpbmUgIHRhZ3NcclxuY29uc3QgZ2FtZV9maWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lX2ZpZWxkJyk7XHJcbmNvbnN0IHJzc19zdGlja2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJzc19zdGlja2VyJyk7XHJcbmNvbnN0IG1lbnVfX2JvdHRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19ib3R0b20nKTtcclxuY29uc3QgbWVudV9fdG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX3RvcCcpO1xyXG5cclxuXHJcbi8vYWRkIGxpc3RlbmVyc1xyXG5zdGFydF9nYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV3R2FtZSk7XHJcbnJlc2V0X2dhbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldEdhbWUpO1xyXG5zb2x2ZV9nYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc29sdmVHYW1lKTtcclxuXHJcbnNpemVfZ2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldEZpZWxkU2l6ZU9uQnV0dG9uKTtcclxuXHJcbmNsYXNzaWNfZ2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldERlZmF1bHRCYWNrZ3JvdW5kKTtcclxuaW1hZ2VfZ2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNldEltYWdlQmFja2dyb3VuZCk7XHJcblxyXG5zYXZlX2dhbWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlR2FtZSk7XHJcbmxvYWRfZ2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvYWRHYW1lKTtcclxuc2NvcmVfZ2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvYWRTY29yZSk7XHJcblxyXG5zb3VuZF9nYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dpdGNoU291bmQpO1xyXG5cclxuXHJcblxyXG4vL2RlZmluZSBjbGFzc2VzXHJcbmNsYXNzIEJsb2NrIHtcclxuICAgIGNvbnN0cnVjdG9yKG51bSwgbmFtZSwgaWQsIHgsIHkpIHtcclxuICAgICAgICB0aGlzLm51bSA9IG51bTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG5cclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcblxyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRYKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiAoZmllbGRfd2lkdGggLyBmaWVsZF9zaXplKSArIGJsb2NrX21hcmdpbiAvIDI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0WSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy55ICogKGZpZWxkX3dpZHRoIC8gZmllbGRfc2l6ZSkgKyBibG9ja19tYXJnaW4gLyAyXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QmxvY2tTaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoZmllbGRfd2lkdGggLyBmaWVsZF9zaXplKSAtIGJsb2NrX21hcmdpblxyXG4gICAgfVxyXG59XHJcblxyXG4vL2Z1bmN0aW9uc1xyXG5cclxuXHJcbi8vZnVuY3Rpb25zIGdhbWUgc2VydmljZVxyXG5mdW5jdGlvbiBzYXZlR2FtZSgpIHtcclxuXHJcbiAgICBsZXQgc2F2ZV9nYW1lX0hUTUwgPSBjcmVhdGVTYXZlR2FtZUhUTUwoKTtcclxuXHJcbiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcbiAgICBwb3B1cC5pbm5lckhUTUwgPSBzYXZlX2dhbWVfSFRNTDtcclxuXHJcbiAgICBzYXZlX2Zyb21fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlRnJvbVBvcHVwKTtcclxuICAgIGNhbmNlbF9mcm9tX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FuY2VsRnJvbVBvcHVwKTtcclxuICAgIGJ1dHRvbnNEaXNhYmxlZChzdGFydF9nYW1lLCByZXNldF9nYW1lLCBzaXplX2dhbWUsIHNvbHZlX2dhbWUsIGNsYXNzaWNfZ2FtZSwgaW1hZ2VfZ2FtZSwgc2F2ZV9nYW1lLCBsb2FkX2dhbWUsIHNjb3JlX2dhbWUsIHNvdW5kX2dhbWUpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZEdhbWUoKSB7XHJcblxyXG4gICAgbGV0IGxvYWRfZ2FtZV9IVE1MID0gY3JlYXRlTG9hZEdhbWVIVE1MKCk7XHJcblxyXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICBwb3B1cC5pbm5lckhUTUwgPSBsb2FkX2dhbWVfSFRNTDtcclxuXHJcbiAgICBsb2FkX2Zyb21fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2FkRnJvbVBvcHVwKTtcclxuICAgIGNhbmNlbF9mcm9tX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FuY2VsRnJvbVBvcHVwKTtcclxuXHJcbiAgICBidXR0b25zRGlzYWJsZWQoc3RhcnRfZ2FtZSwgcmVzZXRfZ2FtZSwgc2l6ZV9nYW1lLCBzb2x2ZV9nYW1lLCBjbGFzc2ljX2dhbWUsIGltYWdlX2dhbWUsIHNhdmVfZ2FtZSwgbG9hZF9nYW1lLCBzY29yZV9nYW1lLCBzb3VuZF9nYW1lKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRTY29yZSgpIHtcclxuXHJcbiAgICBsZXQgbG9hZF9nYW1lX0hUTUwgPSBjcmVhdGVTY29yZUdhbWVIVE1MKCk7XHJcblxyXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICBwb3B1cC5pbm5lckhUTUwgPSBsb2FkX2dhbWVfSFRNTDtcclxuXHJcbiAgICBjYW5jZWxfZnJvbV9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbEZyb21Qb3B1cCk7XHJcblxyXG4gICAgYnV0dG9uc0Rpc2FibGVkKHN0YXJ0X2dhbWUsIHJlc2V0X2dhbWUsIHNpemVfZ2FtZSwgc29sdmVfZ2FtZSwgY2xhc3NpY19nYW1lLCBpbWFnZV9nYW1lLCBzYXZlX2dhbWUsIGxvYWRfZ2FtZSwgc2NvcmVfZ2FtZSwgc291bmRfZ2FtZSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkRnJvbVBvcHVwKCkge1xyXG5cclxuICAgIGJ1dHRvbkVuYWJsZWQoc3RhcnRfZ2FtZSwgcmVzZXRfZ2FtZSwgc2l6ZV9nYW1lLCBzb2x2ZV9nYW1lLCBjbGFzc2ljX2dhbWUsIGltYWdlX2dhbWUsIHNhdmVfZ2FtZSwgbG9hZF9nYW1lLCBzY29yZV9nYW1lLCBzb3VuZF9nYW1lKTtcclxuXHJcbiAgICBsZXQgX2hpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9zYXZlJyk7XHJcblxyXG4gICAgaWYgKF9oaXN0b3J5ID09IG51bGwpIHtcclxuICAgICAgICBjcmVhdGVNZXNzYWdlKCdObyBzYXZlZCBnYW1lIScpO1xyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICB9XHJcbiAgICBzdGVwcyA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RlcHMnKSk7XHJcbiAgICB0aW1lLnNlYyA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGltZV9zZWMnKSk7XHJcbiAgICB0aW1lLm1pbiA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGltZV9taW4nKSk7XHJcbiAgICBmaWVsZF9zaXplID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdfZmllbGRfc2l6ZScpKTtcclxuICAgIGJhY2tncm91bmRfaW1nX3VybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdfYmFja2dyb3VuZF9pbWdfdXJsJyk7XHJcblxyXG4gICAgX2hpc3RvcnkgPSBfaGlzdG9yeS5zcGxpdChcIixcIik7XHJcblxyXG4gICAgaW1hZ2Uuc3JjID0gYmFja2dyb3VuZF9pbWdfdXJsO1xyXG5cclxuICAgIHJlbW92ZUZpZWxkRnJvbURvbSgpO1xyXG5cclxuICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblxyXG4gICAgICAgIGhpc3RvcnkgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgX2hpc3RvcnkubGVuZ3RoOyBpbmRleCArPSAzKSB7XHJcblxyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goW19oaXN0b3J5W2luZGV4XSwgTnVtYmVyKF9oaXN0b3J5W2luZGV4ICsgMV0pLCBOdW1iZXIoX2hpc3RvcnlbaW5kZXggKyAyXSldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9sb2FkID0gdHJ1ZTtcclxuICAgICAgICBuZXdHYW1lKCk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNhbmNlbEZyb21Qb3B1cCgpIHtcclxuXHJcbiAgICBwb3B1cC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIGJ1dHRvbkVuYWJsZWQoc3RhcnRfZ2FtZSwgcmVzZXRfZ2FtZSwgc2l6ZV9nYW1lLCBzb2x2ZV9nYW1lLCBjbGFzc2ljX2dhbWUsIGltYWdlX2dhbWUsIHNhdmVfZ2FtZSwgbG9hZF9nYW1lLCBzY29yZV9nYW1lLCBzb3VuZF9nYW1lKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNhdmVTY29yZUZyb21Qb3B1cCgpIHtcclxuXHJcbiAgICBsZXQgbmFtZTtcclxuICAgIGxldCBzY29yZV9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInNjb3JlX25hbWVcIl0nKTtcclxuICAgIF9zY29yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3Njb3JlJykgfHwgJyc7XHJcbiAgICBsZXQgc2NvcmUgPSBfc2NvcmUuc3BsaXQoXCIsXCIpO1xyXG4gICAgbmFtZSA9IHNjb3JlX25hbWUudmFsdWUuc2xpY2UoMCwgMTApO1xyXG5cclxuICAgIGxldCBjdXJyZW50X2VudHJ5ID0gWyh0aW1lLm1pbiAqIDYwKSArICh0aW1lLnNlYyAtIDEpLCBzdGVwcywgZmllbGRfc2l6ZSwgbmFtZV07XHJcbiAgICBzY29yZS5wdXNoKGN1cnJlbnRfZW50cnkpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfc2NvcmUnLCBzY29yZSk7XHJcblxyXG4gICAgY2FuY2VsRnJvbVBvcHVwKCk7XHJcblxyXG59XHJcblxyXG5cclxuLy8gU2hvdyBUaW1lXHJcbmZ1bmN0aW9uIHNob3dUaW1lKCkge1xyXG5cclxuICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG5cclxuICAgIHRpbWVfZ2FtZS50ZXh0Q29udGVudCA9IGAke2FkZFplcm8odGltZS5taW4pfToke2FkZFplcm8odGltZS5zZWMpfWA7XHJcbiAgICB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHJcbiAgICAgICAgdGltZV9nYW1lLnRleHRDb250ZW50ID0gYCR7YWRkWmVybyh0aW1lLm1pbil9OiR7YWRkWmVybyh0aW1lLnNlYyl9YDtcclxuXHJcbiAgICAgICAgaWYgKHRpbWUuc2VjID09IDU5KSB7XHJcbiAgICAgICAgICAgIHRpbWUuc2VjID0gMDtcclxuICAgICAgICAgICAgdGltZS5taW4gPSAodGltZS5taW4gKyAxKSAlIDYwO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGltZS5zZWMgPSB0aW1lLnNlYyArIDE7XHJcblxyXG4gICAgfSwgMTAwMCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93U3RlcHMoKSB7XHJcblxyXG4gICAgc3RlcHNfZ2FtZS50ZXh0Q29udGVudCA9IGAke3N0ZXBzfSBtb3Zlc2A7XHJcbiAgICBzdGVwcysrO1xyXG59XHJcblxyXG4vLyBBZGQgWmVyb3NcclxuZnVuY3Rpb24gYWRkWmVybyhuKSB7XHJcbiAgICByZXR1cm4gKHBhcnNlSW50KG4sIDEwKSA8IDEwID8gJzAnIDogJycpICsgbjtcclxufVxyXG5cclxuLy9zdGlja2VyXHJcbmZ1bmN0aW9uIHNldFN0aWNrZXIoKSB7XHJcbiAgICBsZXQgc3RpY2tlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDExKSArIDE7XHJcbiAgICByc3Nfc3RpY2tlci5zdHlsZS5iYWNrZ3JvdW5kID0gYHVybChcIi4vYXNzZXRzL2ltZy9yc3NjaG9vbC9zdGlja2VyXyR7c3RpY2tlcn0ucG5nXCIpIGNlbnRlciBuby1yZXBlYXRgO1xyXG4gICAgcnNzX3N0aWNrZXIuc3R5bGUuYmFja2dyb3VuZFNpemUgPSAnY29udGFpbic7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBtb3ZlU3RpY2tlcigpIHtcclxuICAgIHJzc19zdGlja2VyLmNsYXNzTGlzdC5hZGQoJ3Jzc19zdGlja2VyLS1tb3ZlJyk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBiYWNrU3RpY2tlcigpIHtcclxuICAgIHJzc19zdGlja2VyLmNsYXNzTGlzdC5yZW1vdmUoJ3Jzc19zdGlja2VyLS1tb3ZlJyk7XHJcbn1cclxuXHJcblxyXG4vL2Z1bmN0aW9ucyBzZXJ2ZSBidXR0b25zXHJcblxyXG5mdW5jdGlvbiBzZXRGaWVsZFNpemVPbkJ1dHRvbihwYXJhbXMpIHtcclxuXHJcbiAgICByZXNldEdhbWVJbmZvKCk7XHJcbiAgICBiYWNrU3RpY2tlcigpXHJcblxyXG4gICAgZmllbGRfc2l6ZSA9IGZpZWxkX3NpemUgPj0gOCA/IDMgOiBmaWVsZF9zaXplICs9IDE7XHJcbiAgICBoaXN0b3J5ID0gW107XHJcblxyXG4gICAgcmVtb3ZlRmllbGRGcm9tRG9tKCk7XHJcblxyXG4gICAgaW5pdCgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYnV0dG9uc0Rpc2FibGVkKC4uLmFyZ3MpIHtcclxuXHJcbiAgICBmb3IgKGxldCBpZCBvZiBhcmdzKSB7XHJcbiAgICAgICAgaWQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlkLnN0eWxlLm9wYWNpdHkgPSAnMC4zJztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYnV0dG9uRW5hYmxlZCguLi5hcmdzKSB7IC8vaWQgbGlzdFxyXG5cclxuICAgIGZvciAobGV0IGlkIG9mIGFyZ3MpIHtcclxuICAgICAgICBpZC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlkLnN0eWxlLm9wYWNpdHkgPSAnMSc7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2V0RGVmYXVsdEJhY2tncm91bmQoKSB7XHJcblxyXG4gICAgcmVzZXRHYW1lSW5mbygpO1xyXG4gICAgYmFja1N0aWNrZXIoKTtcclxuICAgIHJlbW92ZUZpZWxkRnJvbURvbSgpO1xyXG4gICAgYmFja2dyb3VuZF9pbWdfdXJsID0gJ2Fzc2V0cy9pbWcvZGVmYXVsdF80LmpwZyc7XHJcbiAgICBpbml0KCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZXRJbWFnZUJhY2tncm91bmQoKSB7XHJcblxyXG4gICAgcmVzZXRHYW1lSW5mbygpO1xyXG4gICAgYmFja1N0aWNrZXIoKTtcclxuXHJcbiAgICBpc19zdGFydCA9IGZhbHNlO1xyXG5cclxuICAgIHJlbW92ZUZpZWxkRnJvbURvbSgpO1xyXG4gICAgYmFja2dyb3VuZF9pbWcgPSAoYmFja2dyb3VuZF9pbWcgKyAxKSAlIDEwO1xyXG4gICAgYmFja2dyb3VuZF9pbWdfdXJsID0gJ2Fzc2V0cy9pbWcvJyArIGJhY2tncm91bmRfaW1nICsgJy5qcGcnO1xyXG5cclxuICAgIGluaXQoKTtcclxufVxyXG5cclxuXHJcbi8vIGZ1bmN0aW9ucyAgbWFrZSBibG9ja3NcclxuXHJcbmZ1bmN0aW9uIHNldEJsb2NrcyhmaWVsZF9zaXplKSB7XHJcblxyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGxldCBfYmxvY2sgPSBbXTtcclxuICAgIGxldCBfc3RhcnQgPSBbXTtcclxuICAgIGhpc3RvcnkgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGZpZWxkX3NpemU7IHkrKykge1xyXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgZmllbGRfc2l6ZTsgeCsrKSB7XHJcbiAgICAgICAgICAgIHdpbmRvd1snYmxvY2tfJyArIFN0cmluZyhjb3VudCArIDEpXSA9IG5ldyBCbG9jayhjb3VudCArIDEsICdibG9ja18nICsgU3RyaW5nKGNvdW50ICsgMSksICdpZF8nICsgU3RyaW5nKGNvdW50ICsgMSksIHgsIHkpO1xyXG5cclxuICAgICAgICAgICAgX2Jsb2NrID0gWydibG9ja18nICsgU3RyaW5nKGNvdW50ICsgMSksIHgsIHldO1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goX2Jsb2NrKTtcclxuICAgICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYmxvY2tfZW1wdHkgPSB3aW5kb3dbJ2Jsb2NrXycgKyAoZmllbGRfc2l6ZSAqIGZpZWxkX3NpemUpXTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkcmF3QmxvY2tzKCkge1xyXG5cclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBoaXN0b3J5Lmxlbmd0aDsgaW5kZXgrKykge1xyXG5cclxuICAgICAgICBsZXQgYmxvY2sgPSB3aW5kb3dbaGlzdG9yeVtpbmRleF1bMF1dO1xyXG5cclxuICAgICAgICBibG9jay54ID0gaGlzdG9yeVtpbmRleF1bMV07XHJcbiAgICAgICAgYmxvY2sueSA9IGhpc3RvcnlbaW5kZXhdWzJdO1xyXG5cclxuICAgICAgICBibG9jay5pZC5zdHlsZS5sZWZ0ID0gYmxvY2suZ2V0WChibG9jay54KSArICdweCc7XHJcbiAgICAgICAgYmxvY2suaWQuc3R5bGUudG9wID0gYmxvY2suZ2V0WShibG9jay55KSArICdweCc7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVCbG9jayhibG9jaykge1xyXG5cclxuICAgIGJsb2NrLmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBibG9jay5pZC5zZXRBdHRyaWJ1dGUoJ2lkJywgXCJpZF9cIiArIGJsb2NrLm51bSk7XHJcbiAgICBibG9jay5pZC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbnVtJywgXCJibG9ja19cIiArIGJsb2NrLm51bSk7XHJcblxyXG4gICAgYmxvY2suaWQuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCBcInRydWVcIik7XHJcbiAgICAvL2NsaWNrXHJcbiAgICBibG9jay5pZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1vdmVCbG9jaywgZmFsc2UpO1xyXG5cclxuICAgIC8vZHJhZy1hbmQtZHJvcFxyXG4gICAgYmxvY2suaWQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0LCBmYWxzZSk7XHJcbiAgICBibG9jay5pZC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBoYW5kbGVEcmFnRW50ZXIsIGZhbHNlKTtcclxuICAgIGJsb2NrLmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIsIGZhbHNlKTtcclxuICAgIGJsb2NrLmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZURyYWdMZWF2ZSwgZmFsc2UpO1xyXG4gICAgYmxvY2suaWQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3AsIGZhbHNlKTtcclxuICAgIGJsb2NrLmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBoYW5kbGVEcmFnRW5kLCBmYWxzZSk7XHJcblxyXG4gICAgYmxvY2suaWQuY2xhc3NMaXN0LmFkZCgnYmxvY2snKTtcclxuICAgIGJsb2NrLmlkLnN0eWxlLndpZHRoID0gYmxvY2suZ2V0QmxvY2tTaXplKCkgKyAncHgnO1xyXG4gICAgYmxvY2suaWQuc3R5bGUuaGVpZ2h0ID0gYmxvY2suZ2V0QmxvY2tTaXplKCkgKyAncHgnO1xyXG4gICAgYmxvY2suaWQuc3R5bGUubGVmdCA9IGJsb2NrLmdldFgoKSArICdweCc7XHJcbiAgICBibG9jay5pZC5zdHlsZS50b3AgPSBibG9jay5nZXRZKCkgKyAncHgnO1xyXG4gICAgdGFnX2ZpZWxkLmFwcGVuZENoaWxkKGJsb2NrLmlkKTtcclxuXHJcbiAgICBjb250ZXh0ID0gYmxvY2suaWQuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICBpZiAoYmxvY2subnVtICE9PSBmaWVsZF9zaXplICogZmllbGRfc2l6ZSkge1xyXG5cclxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSxcclxuICAgICAgICAgICAgYmxvY2suZ2V0WCgpICogaW1hZ2VfcmF0aW8sXHJcbiAgICAgICAgICAgIGJsb2NrLmdldFkoKSAqIGltYWdlX3JhdGlvLFxyXG4gICAgICAgICAgICAoZmllbGRfd2lkdGggLyBmaWVsZF9zaXplKSAqIGltYWdlX3JhdGlvLFxyXG4gICAgICAgICAgICAoZmllbGRfd2lkdGggLyBmaWVsZF9zaXplKSAqIGltYWdlX3JhdGlvLFxyXG4gICAgICAgICAgICAwLCAwLCBibG9jay5pZC53aWR0aCwgYmxvY2suaWQuaGVpZ2h0KTtcclxuICAgICAgICBpZiAoYmFja2dyb3VuZF9pbWdfdXJsID09ICdhc3NldHMvaW1nL2RlZmF1bHRfNC5qcGcnKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnRfc2l6ZSArICdweCBBcmlhbCBCbGFjayc7XHJcbiAgICAgICAgICAgIGNvbnRleHQudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBcIiNmZmY1ZjVcIjtcclxuICAgICAgICAgICAgY29udGV4dC5zaGFkb3dCbHVyID0gMTA7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc2hhZG93Q29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQoYmxvY2subnVtLCBibG9jay5pZC53aWR0aCAvIDIsIGJsb2NrLmlkLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vaW52aXNpYmxlIGJsb2NrXHJcbiAgICAgICAgYmxvY2suaWQuc3R5bGUuYm94U2hhZG93ID0gJ25vbmUnO1xyXG4gICAgICAgIGJsb2NrLmlkLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBtb3ZlQmxvY2soZSkge1xyXG5cclxuICAgIGxldCBibG9ja19jdXJyZW50O1xyXG5cclxuICAgIGlmIChlID09PSB1bmRlZmluZWQpIHtcclxuXHJcbiAgICAgICAgaWYgKGRyYWdUYXJnZXQuZGF0YXNldC5udW0gIT09ICdibG9ja18nICsgU3RyaW5nKGZpZWxkX3NpemUgKiBmaWVsZF9zaXplKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBibG9ja19jdXJyZW50ID0gd2luZG93W2RyYWdTcmMuZGF0YXNldC5udW1dO1xyXG4gICAgICAgIGJsb2NrX2N1cnJlbnQuaWQuc3R5bGUudHJhbnNpdGlvbiA9ICcwcyc7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgYmxvY2tfY3VycmVudCA9IHdpbmRvd1tlLnRhcmdldC5kYXRhc2V0Lm51bV07XHJcbiAgICAgICAgYmxvY2tfY3VycmVudC5pZC5zdHlsZS50cmFuc2l0aW9uID0gJzAuM3MnO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvL2NoYW5nZSBvbmx5IG5leHRcclxuICAgIGlmICgoYmxvY2tfY3VycmVudC54ID09IGJsb2NrX2VtcHR5LnggJiYgYmxvY2tfY3VycmVudC55ID09IGJsb2NrX2VtcHR5LnkgKyAxKSB8fCAoYmxvY2tfY3VycmVudC54ID09IGJsb2NrX2VtcHR5LnggJiYgYmxvY2tfY3VycmVudC55ID09IGJsb2NrX2VtcHR5LnkgLSAxKSB8fFxyXG4gICAgICAgIChibG9ja19jdXJyZW50LnkgPT0gYmxvY2tfZW1wdHkueSAmJiBibG9ja19jdXJyZW50LnggPT0gYmxvY2tfZW1wdHkueCArIDEpIHx8IChibG9ja19jdXJyZW50LnkgPT0gYmxvY2tfZW1wdHkueSAmJiBibG9ja19jdXJyZW50LnggPT0gYmxvY2tfZW1wdHkueCAtIDEpKSB7XHJcblxyXG4gICAgICAgIC8vICBzdGVwcysrO1xyXG4gICAgICAgIGlmIChpc19zdGFydCkgc2hvd1N0ZXBzKCk7XHJcblxyXG4gICAgICAgIC8vIGNoYW5nZSBibG9ja3NcclxuICAgICAgICBbYmxvY2tfY3VycmVudC54LCBibG9ja19lbXB0eS54XSA9IFtibG9ja19lbXB0eS54LCBibG9ja19jdXJyZW50LnhdO1xyXG4gICAgICAgIFtibG9ja19jdXJyZW50LnksIGJsb2NrX2VtcHR5LnldID0gW2Jsb2NrX2VtcHR5LnksIGJsb2NrX2N1cnJlbnQueV07XHJcblxyXG4gICAgICAgIC8vc291bmRcclxuICAgICAgICBpZiAoc291bmQpIHNvdW5kXzEucGxheSgpO1xyXG5cclxuICAgICAgICBibG9ja19jdXJyZW50LmlkLnN0eWxlLnRvcCA9IGJsb2NrX2N1cnJlbnQuZ2V0WSgpICsgJ3B4JztcclxuICAgICAgICBibG9ja19jdXJyZW50LmlkLnN0eWxlLmxlZnQgPSBibG9ja19jdXJyZW50LmdldFgoKSArICdweCc7XHJcblxyXG4gICAgICAgIGJsb2NrX2VtcHR5LmlkLnN0eWxlLnRvcCA9IGJsb2NrX2VtcHR5LmdldFkoKSArICdweCc7XHJcbiAgICAgICAgYmxvY2tfZW1wdHkuaWQuc3R5bGUubGVmdCA9IGJsb2NrX2VtcHR5LmdldFgoKSArICdweCc7XHJcblxyXG4gICAgICAgIC8vY2hlY2sgZm9yIHdpblxyXG4gICAgICAgIGlmIChpc19zdGFydCkgd2luR2FtZSgpO1xyXG5cclxuICAgICAgICAvL2FkZCB0byBoaXN0b3J5XHJcbiAgICAgICAgbGV0IGxhc3RfaW5kZXggPSBoaXN0b3J5Lmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIGlmIChibG9ja19lbXB0eS54ID09IGhpc3RvcnlbbGFzdF9pbmRleCAtIDFdWzFdICYmIGJsb2NrX2VtcHR5LnkgPT0gaGlzdG9yeVtsYXN0X2luZGV4IC0gMV1bMl0pIHtcclxuICAgICAgICAgICAgaGlzdG9yeS5wb3AoKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5wb3AoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goW2Jsb2NrX2N1cnJlbnQubmFtZSwgYmxvY2tfY3VycmVudC54LCBibG9ja19jdXJyZW50LnldKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKFtibG9ja19lbXB0eS5uYW1lLCBibG9ja19lbXB0eS54LCBibG9ja19lbXB0eS55XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRmllbGRGcm9tRG9tKCkge1xyXG4gICAgbGV0IGdhbWVfZmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZV9maWVsZCcpO1xyXG4gICAgbGV0IGZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpZWxkJyk7XHJcbiAgICBnYW1lX2ZpZWxkLnJlbW92ZUNoaWxkKGZpZWxkKTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzb2x2ZUdhbWUoKSB7XHJcblxyXG4gICAgaWYgKCFpc19zdGFydCkgcmV0dXJuO1xyXG5cclxuICAgIGlzX3N0YXJ0ID0gZmFsc2U7XHJcbiAgICBzdGVwcyA9IDA7XHJcbiAgICBpZiAodGltZXIpIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG5cclxuICAgIC8vc2hvd1RpbWUoKTtcclxuICAgIHRpbWVfZ2FtZS50ZXh0Q29udGVudCA9IGAtLTotLWA7XHJcblxyXG4gICAgYmFja1N0aWNrZXIoKTtcclxuXHJcbiAgICBsZXQgaW5kZXggPSBoaXN0b3J5Lmxlbmd0aCAtIDE7XHJcblxyXG4gICAgc29sdmUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblxyXG4gICAgICAgIHNob3dTdGVwcygpO1xyXG5cclxuICAgICAgICBidXR0b25zRGlzYWJsZWQoc3RhcnRfZ2FtZSwgc2l6ZV9nYW1lLCBzb2x2ZV9nYW1lLCBjbGFzc2ljX2dhbWUsIGltYWdlX2dhbWUsIHNhdmVfZ2FtZSwgbG9hZF9nYW1lLCBzY29yZV9nYW1lKTtcclxuXHJcbiAgICAgICAgaWYgKGluZGV4IDw9IGZpZWxkX3NpemUgKiBmaWVsZF9zaXplKSB7XHJcblxyXG4gICAgICAgICAgICBidXR0b25FbmFibGVkKHN0YXJ0X2dhbWUsIHNpemVfZ2FtZSwgc29sdmVfZ2FtZSwgY2xhc3NpY19nYW1lLCBpbWFnZV9nYW1lLCBzYXZlX2dhbWUsIGxvYWRfZ2FtZSwgc2NvcmVfZ2FtZSk7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc29sdmUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBfYmxvY2tfZW1wdHkgPSB3aW5kb3dbaGlzdG9yeVtpbmRleF1bMF1dO1xyXG4gICAgICAgICAgICBsZXQgX2Jsb2NrX2N1cnJlbnQgPSB3aW5kb3dbaGlzdG9yeVtpbmRleCAtIDFdWzBdXTtcclxuICAgICAgICAgICAgX2Jsb2NrX2N1cnJlbnQuaWQuc3R5bGUudHJhbnNpdGlvbiA9ICcwLjNzJztcclxuXHJcbiAgICAgICAgICAgIFtfYmxvY2tfY3VycmVudC54LCBfYmxvY2tfZW1wdHkueF0gPSBbX2Jsb2NrX2VtcHR5LngsIF9ibG9ja19jdXJyZW50LnhdO1xyXG4gICAgICAgICAgICBbX2Jsb2NrX2N1cnJlbnQueSwgX2Jsb2NrX2VtcHR5LnldID0gW19ibG9ja19lbXB0eS55LCBfYmxvY2tfY3VycmVudC55XTtcclxuXHJcbiAgICAgICAgICAgIF9ibG9ja19jdXJyZW50LmlkLnN0eWxlLnRvcCA9IF9ibG9ja19jdXJyZW50LmdldFkoKSArICdweCc7XHJcbiAgICAgICAgICAgIF9ibG9ja19jdXJyZW50LmlkLnN0eWxlLmxlZnQgPSBfYmxvY2tfY3VycmVudC5nZXRYKCkgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgX2Jsb2NrX2VtcHR5LmlkLnN0eWxlLnRvcCA9IF9ibG9ja19lbXB0eS5nZXRZKCkgKyAncHgnO1xyXG4gICAgICAgICAgICBfYmxvY2tfZW1wdHkuaWQuc3R5bGUubGVmdCA9IF9ibG9ja19lbXB0eS5nZXRYKCkgKyAncHgnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5kZXggLT0gMjtcclxuXHJcbiAgICB9LCA1MDApO1xyXG5cclxuICAgIGlmICh0aW1lcikgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcblxyXG59XHJcblxyXG5cclxuLy8gbWFrZSBnYW1lX2ZpZWxkXHJcblxyXG5mdW5jdGlvbiBtYWtlR2FtZUZpZWxkKHBhcmFtcykge1xyXG4gICAgbWFrZUZpZWxkKGZpZWxkX3dpZHRoKTtcclxuICAgIGNyZWF0ZVBvcHVwKCk7XHJcbn1cclxuXHJcbi8vbWFrZSBmaWVsZFxyXG5mdW5jdGlvbiBtYWtlRmllbGQoZmllbGRfd2lkdGgpIHtcclxuXHJcbiAgICB0YWdfZmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmllbGQnKTtcclxuICAgIGlmICh0YWdfZmllbGQgPT09IG51bGwpIHtcclxuXHJcbiAgICAgICAgdGFnX2ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGFnX2ZpZWxkLmNsYXNzTGlzdC5hZGQoJ2ZpZWxkJyk7XHJcbiAgICAgICAgdGFnX2ZpZWxkLnN0eWxlLndpZHRoID0gZmllbGRfd2lkdGggKyAncHgnO1xyXG4gICAgICAgIHRhZ19maWVsZC5zdHlsZS5oZWlnaHQgPSBmaWVsZF93aWR0aCArICdweCc7XHJcblxyXG4gICAgICAgIC8vICBnYW1lX2ZpZWxkLmFwcGVuZENoaWxkKHRhZ19maWVsZCk7XHJcbiAgICAgICAgbWVudV9fYm90dG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhZ19maWVsZCwgbWVudV9fYm90dG9tKTtcclxuICAgICAgICBnYW1lX2ZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIpO1xyXG4gICAgICAgIGdhbWVfZmllbGQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlRHJhZ0VudGVyKTtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4vL2RyYWctYW5kLWRyb3BcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChlKSB7XHJcbiAgICBkcmFnU3JjID0gdGhpcztcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRHJhZ092ZXIoZSkge1xyXG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEcmFnRW50ZXIoZSkge31cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURyYWdMZWF2ZShlKSB7fVxyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURyb3AoZSkge1xyXG4gICAgZHJhZ1RhcmdldCA9IHRoaXM7XHJcblxyXG4gICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlQmxvY2soKTtcclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoZSkge31cclxuXHJcblxyXG4vLyBJbnRpdFxyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuXHJcbiAgICBzZXRTdGlja2VyKCk7XHJcblxyXG4gICAgLy8gZ2V0IGltYWdlXHJcbiAgICBpbWFnZSA9IG5ldyBJbWFnZTtcclxuICAgIGltYWdlLnNyYyA9IGJhY2tncm91bmRfaW1nX3VybDtcclxuICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblxyXG4gICAgICAgIGltYWdlX3JhdGlvID0gaW1hZ2Uud2lkdGggLyAoZmllbGRfd2lkdGggKyAzKTtcclxuXHJcbiAgICAgICAgc3RhcnQoKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3dpdGNoU291bmQoKSB7XHJcbiAgICBzb3VuZCA9ICFzb3VuZDtcclxuICAgIHNvdW5kX2dhbWUuY2xhc3NMaXN0LnRvZ2dsZSgnYnV0dG9uLS1uaWdodHNreScpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2V0VHJhbnNpdGlvbigpIHtcclxuXHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IGZpZWxkX3NpemUgKiBmaWVsZF9zaXplOyBpbmRleCsrKSB7XHJcblxyXG4gICAgICAgIHdpbmRvd1snYmxvY2tfJyArIGluZGV4XS5pZC5zdHlsZS50cmFuc2l0aW9uID0gJzAuM3MnO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSYW5kb21OZXdDb29yZHMoKSB7XHJcblxyXG4gICAgY29uc3QgZGlyZWN0aW9uX3RhYmxlID0gW1xyXG4gICAgICAgIFsneCcsICd5J10sXHJcbiAgICAgICAgWzEsIC0xXVxyXG4gICAgXTtcclxuICAgIGxldCBuZXdfeDtcclxuICAgIGxldCBuZXdfeTtcclxuXHJcbiAgICBpZiAoZGlyZWN0aW9uX3RhYmxlWzBdW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSldID09PSAneCcpIHtcclxuXHJcbiAgICAgICAgbmV3X3ggPSBNYXRoLmFicyhibG9ja19lbXB0eS54ICsgZGlyZWN0aW9uX3RhYmxlWzFdW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSldKTtcclxuICAgICAgICBuZXdfeSA9IGJsb2NrX2VtcHR5Lnk7XHJcbiAgICAgICAgbmV3X3ggPSBuZXdfeCA9PT0gZmllbGRfc2l6ZSA/IGZpZWxkX3NpemUgLSAyIDogbmV3X3g7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgbmV3X3kgPSBNYXRoLmFicyhibG9ja19lbXB0eS55ICsgZGlyZWN0aW9uX3RhYmxlWzFdW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSldKTtcclxuICAgICAgICBuZXdfeSA9IG5ld195ID09PSBmaWVsZF9zaXplID8gZmllbGRfc2l6ZSAtIDIgOiBuZXdfeTtcclxuICAgICAgICBuZXdfeCA9IGJsb2NrX2VtcHR5Lng7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXdfeDogbmV3X3gsXHJcbiAgICAgICAgbmV3X3k6IG5ld195LFxyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEJhY2tNb3ZlKCkge1xyXG5cclxuICAgIGxldCBkaXJlY3Rpb25fb2JqZWN0ID0gZ2V0UmFuZG9tTmV3Q29vcmRzKCk7XHJcblxyXG4gICAgbGV0IGZpbmQgPSBmYWxzZTtcclxuICAgIGxldCBpbmRleCA9IGhpc3RvcnkubGVuZ3RoIC0gMTtcclxuXHJcbiAgICBpZiAoZGlyZWN0aW9uX29iamVjdC5uZXdfeCAhPT0gaGlzdG9yeVtpbmRleCAtIDJdWzFdICYmIGRpcmVjdGlvbl9vYmplY3QubmV3X3kgIT09IGhpc3RvcnlbaW5kZXggLSAyXVsyXSkge1xyXG4gICAgICAgIHdoaWxlICghZmluZCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbl9vYmplY3QubmV3X3ggPT0gaGlzdG9yeVtpbmRleF1bMV0gJiYgZGlyZWN0aW9uX29iamVjdC5uZXdfeSA9PSBoaXN0b3J5W2luZGV4XVsyXSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBibG9ja19jdXJyZW50ID0gd2luZG93W2hpc3RvcnlbaW5kZXhdWzBdXTtcclxuXHJcbiAgICAgICAgICAgICAgICBbYmxvY2tfY3VycmVudC54LCBibG9ja19lbXB0eS54XSA9IFtibG9ja19lbXB0eS54LCBibG9ja19jdXJyZW50LnhdO1xyXG4gICAgICAgICAgICAgICAgW2Jsb2NrX2N1cnJlbnQueSwgYmxvY2tfZW1wdHkueV0gPSBbYmxvY2tfZW1wdHkueSwgYmxvY2tfY3VycmVudC55XTtcclxuXHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goW2Jsb2NrX2N1cnJlbnQubmFtZSwgYmxvY2tfY3VycmVudC54LCBibG9ja19jdXJyZW50LnldKTtcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChbYmxvY2tfZW1wdHkubmFtZSwgYmxvY2tfZW1wdHkueCwgYmxvY2tfZW1wdHkueV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpbmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzaHVmZmxlQmxvY2tzKHRpbWVzKSB7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGltZXM7IGluZGV4KyspIHtcclxuXHJcbiAgICAgICAgYWRkQmFja01vdmUoKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdTdGFydFBvc2l0aW9uKCkge1xyXG5cclxuICAgIHNldEJsb2NrcyhmaWVsZF9zaXplKTtcclxuXHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IGZpZWxkX3NpemUgKiBmaWVsZF9zaXplOyBpbmRleCsrKSB7XHJcblxyXG4gICAgICAgIGdlbmVyYXRlQmxvY2sod2luZG93WydibG9ja18nICsgU3RyaW5nKGluZGV4KV0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldEdhbWVJbmZvKCkge1xyXG4gICAgc3RlcHMgPSAwO1xyXG4gICAgc3RlcHNfZ2FtZS50ZXh0Q29udGVudCA9IGAke3N0ZXBzfSBtb3Zlc2A7XHJcbiAgICB0aW1lLnNlYyA9IDAsXHJcbiAgICAgICAgdGltZS5taW4gPSAwLFxyXG4gICAgICAgIHRpbWVfZ2FtZS50ZXh0Q29udGVudCA9IGAke2FkZFplcm8oMCl9OiR7YWRkWmVybygwKX1gO1xyXG4gICAgaWYgKHRpbWVyKSBjbGVhckludGVydmFsKHRpbWVyKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlc2V0R2FtZSgpIHtcclxuXHJcbiAgICBiYWNrU3RpY2tlcigpO1xyXG5cclxuICAgIGlmIChzb2x2ZSkgY2xlYXJJbnRlcnZhbChzb2x2ZSk7XHJcblxyXG4gICAgcmVzZXRHYW1lSW5mbygpO1xyXG5cclxuICAgIGJ1dHRvbkVuYWJsZWQoc3RhcnRfZ2FtZSwgc2l6ZV9nYW1lLCBzb2x2ZV9nYW1lLCBjbGFzc2ljX2dhbWUsIGltYWdlX2dhbWUsIHNhdmVfZ2FtZSwgbG9hZF9nYW1lLCBzY29yZV9nYW1lKTtcclxuICAgIGJhY2tTdGlja2VyKCk7XHJcblxyXG4gICAgaXNfc3RhcnQgPSBmYWxzZVxyXG5cclxuICAgIHJlc2V0QmxvY2tzKCk7XHJcbiAgICBzZXRUcmFuc2l0aW9uKCk7XHJcblxyXG4gICAgZHJhd0Jsb2NrcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldEJsb2NrcygpIHtcclxuXHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgbGV0IF9ibG9jayA9IFtdO1xyXG4gICAgaGlzdG9yeSA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgZmllbGRfc2l6ZTsgeSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBmaWVsZF9zaXplOyB4KyspIHtcclxuXHJcbiAgICAgICAgICAgIF9ibG9jayA9IFsnYmxvY2tfJyArIFN0cmluZyhjb3VudCArIDEpLCB4LCB5XTtcclxuICAgICAgICAgICAgd2luZG93WydibG9ja18nICsgU3RyaW5nKGNvdW50ICsgMSldLnggPSB4O1xyXG4gICAgICAgICAgICB3aW5kb3dbJ2Jsb2NrXycgKyBTdHJpbmcoY291bnQgKyAxKV0ueSA9IHk7XHJcblxyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goX2Jsb2NrKTtcclxuICAgICAgICAgICAgY291bnQgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBibG9ja19lbXB0eSA9IHdpbmRvd1snYmxvY2tfJyArIFN0cmluZygoZmllbGRfc2l6ZSAqIGZpZWxkX3NpemUpKV07XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQb3B1cCgpIHtcclxuICAgIHBvcHVwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBwb3B1cC5jbGFzc05hbWUgPSAncG9wdXAgaGlkZGVuJztcclxuICAgIHBvcHVwLnN0eWxlLndpZHRoID0gZmllbGRfd2lkdGggKyAncHgnO1xyXG4gICAgcG9wdXAuc3R5bGUuaGVpZ2h0ID0gZmllbGRfd2lkdGggKyAncHgnO1xyXG5cclxuICAgIHRhZ19maWVsZC5hcHBlbmRDaGlsZChwb3B1cCk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2F2ZUZyb21Qb3B1cCgpIHtcclxuXHJcbiAgICBzdGVwcyA9IHN0ZXBzID4gMCA/IHN0ZXBzIC0gMSA6IDA7XHJcbiAgICB0aW1lLnNlYyA9IHRpbWUuc2VjID4gMCA/IHRpbWUuc2VjIC0gMSA6IDA7XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfc2F2ZScsIGhpc3RvcnkpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3N0ZXBzJywgc3RlcHMpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RpbWVfc2VjJywgdGltZS5zZWMpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RpbWVfbWluJywgdGltZS5taW4pO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19maWVsZF9zaXplJywgZmllbGRfc2l6ZSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnX2JhY2tncm91bmRfaW1nX3VybCcsIGJhY2tncm91bmRfaW1nX3VybCk7XHJcblxyXG4gICAgY2FuY2VsRnJvbVBvcHVwKCk7XHJcblxyXG59XHJcblxyXG4vL3dpbkdhbWVcclxuZnVuY3Rpb24gd2luR2FtZSgpIHtcclxuXHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZmllbGRfc2l6ZSAqIGZpZWxkX3NpemU7IGluZGV4KyspIHtcclxuICAgICAgICBsZXQgYmxvY2tfY3VycmVudCA9IHdpbmRvd1snYmxvY2tfJyArIFN0cmluZyhpbmRleCArIDEpXTtcclxuICAgICAgICBpZiAoYmxvY2tfY3VycmVudC54ICE9PSBoaXN0b3J5W2luZGV4XVsxXSB8fCBibG9ja19jdXJyZW50LnkgIT09IGhpc3RvcnlbaW5kZXhdWzJdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgY29uc29sZS5sb2coJ3BvcyAxJyk7XHJcblxyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwb3MgMicpO1xyXG4gICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICBsZXQgd2luX2dhbWVfSFRNTCA9IGNyZWF0ZVdpbkdhbWVIVE1MKCk7XHJcbiAgICAgICAgcG9wdXAuaW5uZXJIVE1MID0gd2luX2dhbWVfSFRNTDtcclxuXHJcbiAgICAgICAgc2F2ZV9zY29yZV9mcm9tX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZVNjb3JlRnJvbVBvcHVwKTtcclxuICAgICAgICBjYW5jZWxfZnJvbV9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbEZyb21Qb3B1cCk7XHJcbiAgICB9LCAxMDAwKTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuLy9mdW5jdGlvbnMgd2l0aCBHZXQgSFRNTFxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU2F2ZUdhbWVIVE1MKCkge1xyXG4gICAgcmV0dXJuIGBcclxuICAgIDxkaXY+XHJcbiAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkXCI+U2F2ZSBnYW1lPC9kaXY+ICBcclxuICAgICA8ZGl2PjxidXR0b24gIGlkID0gXCJzYXZlX2Zyb21fcG9wdXBcIiAgdHlwZT1cIiBidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLWdyZWVuXCI+PHNwYW4+U2F2ZTwvc3Bhbj48L2J1dHRvbj48L2Rpdj5cclxuICAgICA8ZGl2PjxidXR0b24gIGlkID0gXCJjYW5jZWxfZnJvbV9wb3B1cFwiIHR5cGU9XCIgYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1yZWRcIj48c3Bhbj5DYW5jZWw8L3NwYW4+PC9idXR0b24+PGRpdj4gXHJcbiAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2FkR2FtZUhUTUwoKSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgPGRpdj5cclxuICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6MnJlbTsgZm9udC13ZWlnaHQ6IGJvbGRcIj5Mb2FkIGdhbWU8L2Rpdj4gXHJcbiAgICAgPGRpdj48YnV0dG9uICBpZCA9IFwibG9hZF9mcm9tX3BvcHVwXCIgdHlwZT1cIiBidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLWdyZWVuXCI+PHNwYW4+TG9hZDwvc3Bhbj48L2J1dHRvbj48L2Rpdj5cclxuICAgICA8ZGl2PjxidXR0b24gIGlkID0gXCJjYW5jZWxfZnJvbV9wb3B1cFwiIHR5cGU9XCIgYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1yZWRcIj48c3Bhbj5DYW5jZWw8L3NwYW4+PC9idXR0b24+PGRpdj4gXHJcbiAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTY29yZUdhbWVIVE1MKCkge1xyXG4gICAgbGV0IHJlejtcclxuICAgIHJleiA9IGBcclxuICAgICA8ZGl2PlxyXG4gICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6MnJlbTsgZm9udC13ZWlnaHQ6IGJvbGRcIj5TY29yZTwvZGl2PmA7XHJcblxyXG4gICAgbGV0IF9zY29yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3Njb3JlJykgfHwgJyc7XHJcblxyXG4gICAgX3Njb3JlID0gX3Njb3JlLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgbGV0IG5hbWU7XHJcbiAgICBsZXQgc3RlcHM7XHJcbiAgICBsZXQgdGltZTtcclxuICAgIGxldCB0aW1lX21pbjtcclxuICAgIGxldCB0aW1lX3NlYztcclxuICAgIGxldCBzaXplO1xyXG5cclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAxMDsgaW5kZXgrKykge1xyXG5cclxuICAgICAgICBuYW1lID0gX3Njb3JlLnBvcCgpO1xyXG4gICAgICAgIHNpemUgPSBfc2NvcmUucG9wKCk7XHJcbiAgICAgICAgc2l6ZSA9IGAke3NpemV9eCR7c2l6ZX1gO1xyXG5cclxuICAgICAgICBzdGVwcyA9IF9zY29yZS5wb3AoKTtcclxuICAgICAgICB0aW1lID0gX3Njb3JlLnBvcCgpO1xyXG4gICAgICAgIHRpbWVfbWluID0gdGltZSA/IGFkZFplcm8oTWF0aC50cnVuYyh0aW1lIC8gNjApKSA6ICcwMCc7XHJcbiAgICAgICAgdGltZV9zZWMgPSB0aW1lID8gYWRkWmVybyh0aW1lICUgNjApIDogJzAwJztcclxuXHJcbiAgICAgICAgcmV6ICs9IHN0ZXBzID8gYDxkaXYgIGNsYXNzID1cInBvcHVwX19zY29yZVwiIHN0eWxlID0gXCJiYWNrZ3JvdW5kOiAjZjRlOWExOyBtYXJnaW46MnB4OyBwYWRkaW5nOiAxcHggMTJweCAxcHggMTJweFwiPiBcclxuICAgICAgICAke25hbWV9ICR7c2l6ZX0gbW92ZXM6ICR7c3RlcHN9IHRpbWU6ICR7dGltZV9taW59OiR7dGltZV9zZWN9PC9kaXY+YCA6XHJcbiAgICAgICAgICAgIGA8ZGl2IHN0eWxlID0gXCJiYWNrZ3JvdW5kOiAjZjRlOWExOyBtYXJnaW46MnB4OyBwYWRkaW5nOiAxcHggMTBweCAxcHggMTBweDsgY29sb3I6I2Y0ZTlhMTtcIj4tPC9kaXY+YDtcclxuICAgIH1cclxuICAgIHJleiArPSBgPGRpdj48YnV0dG9uICBpZCA9IFwiY2FuY2VsX2Zyb21fcG9wdXBcIiB0eXBlPVwiIGJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi0tcmVkXCI+PHNwYW4+Q2FuY2VsPC9zcGFuPjwvYnV0dG9uPjxkaXY+IFxyXG4gICAgPC9kaXY+XHJcbiAgIGA7XHJcbiAgICByZXR1cm4gcmV6O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlV2luR2FtZUhUTUwoKSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgPGRpdj5cclxuICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogZ3JlZW47IHRleHQtYWxpZ246IGNlbnRlclwiPkhvb3JheSEgWW91IHNvbHZlZCB0aGUgcHV6emxlIGluPC9kaXY+XHJcbiAgICBcclxuICAgICA8ZGl2IHN0eWxlPVwiIGZvbnQtc2l6ZToxLjVyZW07IHRleHQtYWxpZ246IGNlbnRlclwiPiAke3N0ZXBzLTF9IG1vdmVzICYgdGltZTogJHt0aW1lLm1pbn06JHt0aW1lLnNlYy0xfSA8L2Rpdj5cclxuICAgICA8ZGl2PiA8aW5wdXQgdHlwZT1cInRleHRcIiBzdHlsZT1cImxpbmUtaGVpZ2h0OjFyZW07IHBhZGRpbmc6IDAuNXJlbTsgYm9yZGVyOjNweCBzb2xpZCBncmVlblwiICAgbmFtZT1cInNjb3JlX25hbWVcIiBhdXRvZm9jdXM+IDwvZGl2PlxyXG4gICAgICAgXHJcbiAgICAgPGRpdj5cclxuICAgICAgICA8YnV0dG9uIGlkID1cInNhdmVfc2NvcmVfZnJvbV9wb3B1cFwiIHR5cGU9XCIgYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1ncmVlblwiPjxzcGFuPlNhdmUgeW91cnMgcmVzdWx0IDwvc3Bhbj48L2J1dHRvbj5cclxuICAgICAgICA8YnV0dG9uIGlkID1cImNhbmNlbF9mcm9tX3BvcHVwXCIgdHlwZT1cIiBidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLXJlZFwiIHN0eWxlPVwibWFyZ2luLXRvcDowLjVyZW1cIj48c3Bhbj5DYW5jZWwgPC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgIDxkaXY+XHJcbiAgICBcclxuICAgIDwvZGl2PlxyXG4gICAgYDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgbGV0IG1lc3NhZ2VfSFRNTCA9IGBcclxuICAgIDxkaXY+XHJcbiAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZToycmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyXCI+JHttZXNzYWdlfTwvZGl2PiAgIFxyXG4gICAgIDxkaXY+XHJcbiAgICAgICAgPGJ1dHRvbiBpZCA9XCJjYW5jZWxfZnJvbV9wb3B1cFwiIHR5cGU9XCIgYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1yZWRcIiBzdHlsZT1cIm1hcmdpbi10b3A6MC41cmVtXCI+PHNwYW4+Q2FuY2VsIDwvc3Bhbj48L2J1dHRvbj5cclxuICAgICA8ZGl2PiAgIFxyXG4gICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cclxuICAgIHBvcHVwLmlubmVySFRNTCA9IG1lc3NhZ2VfSFRNTDtcclxuXHJcbiAgICBjYW5jZWxfZnJvbV9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbEZyb21Qb3B1cCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZXRCYXNpY0hUTUwoKSB7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBgIDxkaXYgY2xhc3M9XCJnYW1lX2ZpZWxkXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlcl9fc3RpY2tlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicnNzX3N0aWNrZXJcIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX19nYW1lZGF0YVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwidGltZV9nYW1lXCIgY2xhc3M9XCJcIj48L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cInN0ZXBzX2dhbWVcIiBjbGFzcz1cIlwiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cIm1lbnVfX3RvcFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW51X190b3BfaW5uZXJcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInN0YXJ0X2dhbWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1ncmVlblwiPiA8c3Bhbj5TdGFydDwvc3Bhbj48L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInJlc2V0X2dhbWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1yZWRcIj4gPHNwYW4+UmVzZXQ8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJzb2x2ZV9nYW1lXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi0tbGVhZlwiPjxzcGFuPlNvbHZlPC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVudV9fdG9wX2lubmVyXCI+ICA8YnV0dG9uIGlkPVwic2l6ZV9nYW1lXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi0tbmlnaHRza3lcIj48c3Bhbj400YU0PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gaWQ9XCJjbGFzc2ljX2dhbWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1ibHVlXCI+PHNwYW4+Q2xhc3NpYzwvc3Bhbj48L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImltYWdlX2dhbWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS13YXRlclwiPjxzcGFuPkltYWdlPC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPGRpdiBjbGFzcz1cIm1lbnVfX2JvdHRvbVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtZW51X190b3BfaW5uZXJcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInNhdmVfZ2FtZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLW5pZ2h0c2t5XCI+IDxzcGFuPlNhdmU8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJsb2FkX2dhbWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLS1uaWdodHNreVwiPiA8c3Bhbj5Mb2FkPC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwic2NvcmVfZ2FtZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLW5pZ2h0c2t5XCI+PHNwYW4+U2NvcmU8L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnVfX3RvcF9pbm5lclwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwic291bmRfZ2FtZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ1dHRvbiBcIj48c3Bhbj5Tb3VuZDwvc3Bhbj48L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgIFxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG5cclxuPGF1ZGlvIGlkPVwic291bmRfMVwiIHNyYz1cIi4vYXNzZXRzL3NvdW5kcy9zb3VuZF8xLm1wM1wiPjwvYXVkaW8+XHJcbiAgICBgO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3RhcnQoKSB7XHJcblxyXG4gICAgbWFrZUdhbWVGaWVsZCgpO1xyXG4gICAgLy9zZXQgc2l6ZVxyXG4gICAgc2l6ZV9nYW1lLmNoaWxkcmVuWzBdLnRleHRDb250ZW50ID0gZmllbGRfc2l6ZSArICd4JyArIGZpZWxkX3NpemU7XHJcblxyXG4gICAgZHJhd1N0YXJ0UG9zaXRpb24oKTtcclxuXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBuZXdHYW1lKCkge1xyXG5cclxuICAgIGlmICghX2xvYWQpIHtcclxuXHJcbiAgICAgICAgdGltZS5zZWMgPSAwO1xyXG4gICAgICAgIHRpbWUubWluID0gMFxyXG4gICAgfTtcclxuXHJcbiAgICBzaG93VGltZSgpO1xyXG5cclxuICAgIGlzX3N0YXJ0ID0gdHJ1ZTtcclxuICAgIGlmICghX2xvYWQpIHN0ZXBzID0gMDtcclxuXHJcbiAgICBtb3ZlU3RpY2tlcigpO1xyXG5cclxuICAgIGlmICghX2xvYWQpIHtcclxuICAgICAgICByZXNldEJsb2NrcygpXHJcbiAgICB9O1xyXG5cclxuICAgIHNldFRyYW5zaXRpb24oKTtcclxuXHJcbiAgICBzaG93U3RlcHMoKTtcclxuXHJcbiAgICBpZiAoIV9sb2FkKSB7XHJcbiAgICAgICAgc2h1ZmZsZUJsb2NrcyhzaHVmZmxlX2ZhY3RvciAqIGZpZWxkX3NpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9sb2FkID0gZmFsc2U7XHJcblxyXG4gICAgZHJhd0Jsb2NrcygpO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG4vL3N0YXJ0XHJcbmluaXQoKTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///931\n\n}")}},__webpack_exports__={};__webpack_modules__[931]()})();